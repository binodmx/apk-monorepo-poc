task docker_build(type:Exec) {
    group 'docker'
    def imageName = 'binodmx/' + project.name
    commandLine 'docker', 'build', '-t', imageName, '.'
}

task docker_login(type:Exec) {
    group 'docker'
    def username = rootProject.hasProperty("docker_username") ? docker_username : System.getenv("docker_username")
    def password = rootProject.hasProperty("docker_password") ? docker_password : System.getenv("docker_password")
    commandLine 'docker', 'login', '--username', username, '--password', password
}

task docker_push(type:Exec) {
    group 'docker'
    dependsOn docker_build
    dependsOn docker_login
    def imageName = 'binodmx/' + project.name
    commandLine 'docker', 'push', imageName
}
